import{a8 as O,a4 as T,C as b,r as h,g as x,M as N,G as P,$ as L,X as R,a9 as M,w as C,H as m,a0 as _,u as g,aa as A,y as S}from"./index-ca17ded8.js";var p=typeof window<"u";function E(n){return p?requestAnimationFrame(n):-1}function z(n){E(()=>E(n))}var B=n=>n===window,y=(n,e)=>({top:0,left:0,right:n,bottom:e,width:n,height:e}),U=n=>{const e=g(n);if(B(e)){const t=e.innerWidth,i=e.innerHeight;return y(t,i)}return e!=null&&e.getBoundingClientRect?e.getBoundingClientRect():y(0,0)};function q(n){const e=O(n,null);if(e){const t=m(),{link:i,unlink:r,internalChildren:o}=e;i(t),T(()=>r(t));const s=b(()=>o.indexOf(t));return{parent:e,index:s}}return{parent:null,index:h(-1)}}function D(n){const e=[],t=i=>{Array.isArray(i)&&i.forEach(r=>{var o;A(r)&&(e.push(r),(o=r.component)!=null&&o.subTree&&(e.push(r.component.subTree),t(r.component.subTree.children)),r.children&&t(r.children))})};return t(n),e}var k=(n,e)=>{const t=n.indexOf(e);return t===-1?n.findIndex(i=>e.key!==void 0&&e.key!==null&&i.type===e.type&&i.key===e.key):t};function W(n,e,t){const i=D(n.subTree.children);t.sort((o,s)=>k(i,o.vnode)-k(i,s.vnode));const r=t.map(o=>o.proxy);e.sort((o,s)=>{const u=r.indexOf(o),a=r.indexOf(s);return u-a})}function F(n){const e=x([]),t=x([]),i=m();return{children:e,linkChildren:o=>{_(n,Object.assign({link:a=>{a.proxy&&(t.push(a),e.push(a.proxy),W(i,e,t))},unlink:a=>{const c=t.indexOf(a);e.splice(c,1),t.splice(c,1)},children:e,internalChildren:t},o))}}}function Y(n){let e;N(()=>{n(),P(()=>{e=!0})}),L(()=>{e&&n()})}function K(n,e,t={}){if(!p)return;const{target:i=window,passive:r=!1,capture:o=!1}=t;let s=!1,u;const a=l=>{if(s)return;const d=g(l);d&&!u&&(d.addEventListener(n,e,{capture:o,passive:r}),u=!0)},c=l=>{if(s)return;const d=g(l);d&&u&&(d.removeEventListener(n,e,o),u=!1)};T(()=>c(i)),R(()=>c(i)),Y(()=>a(i));let v;return M(i)&&(v=C(i,(l,d)=>{c(d),a(l)})),()=>{v==null||v(),c(i),s=!0}}var f,w;function X(){if(!f&&(f=h(0),w=h(0),p)){const n=()=>{f.value=window.innerWidth,w.value=window.innerHeight};n(),window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n,{passive:!0})}return{width:f,height:w}}var H=/scroll|auto|overlay/i,G=p?window:void 0;function I(n){return n.tagName!=="HTML"&&n.tagName!=="BODY"&&n.nodeType===1}function $(n,e=G){let t=n;for(;t&&t!==e&&I(t);){const{overflowY:i}=window.getComputedStyle(t);if(H.test(i))return t;t=t.parentNode}return e}const V=Symbol();function J(n){const e=O(V,null);e&&C(e,t=>{t&&n()})}function Q(n){const e=m();e&&S(e.proxy,n)}export{V as P,Y as a,Q as b,U as c,z as d,F as e,q as f,X as g,$ as h,J as o,E as r,K as u};
